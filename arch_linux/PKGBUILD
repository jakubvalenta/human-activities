# Maintainer: Jakub Valenta <jakub@jakubvalenta.cz>
pkgname=lidske-aktivity
pkgver=0.5.0
pkgrel=1
epoch=
pkgdesc='Monitor size of directories'
arch=('any')
url='https://lab.saloun.cz/jakub/art-lidske-aktivity-gtk'
license=('GPL')
groups=()
depends=('python-pillow' 'python-sqlalchemy' 'python-wxpython>=4')
makedepends=()
checkdepends=('python-pytest')
optdepends=('libappindicator-gtk3: AppIndicator support')
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=($pkgname-$pkgver.tar.xz)
md5sums=('1c8c06bc270fa63d32ee8c3f51dac9f7')
noextract=()

build() {
  cd "$srcdir/$pkgname-$pkgver"

  make build
}

check() {
  cd "$srcdir/$pkgname-$pkgver"

  make -k check
}

package() {
  cd "$srcdir/$pkgname-$pkgver"

  DESTDIR="$pkgdir" make install

  install -D -m644 -t "$pkgdir/etc/xdg/autostart/" data/*.desktop
  install -D -m644 -t "$pkgdir/usr/lib/systemd/system/" data/*.service data/*.timer
  install -d -m755 "$pkgdir/usr/lib/systemd/system/timers.target.wants"
  ln -s ../lidske-aktivity.timer "$pkgdir/usr/lib/systemd/system/timers.target.wants/lidske-aktivity.timer"
}

# vim:set ts=2 sw=2 et:
