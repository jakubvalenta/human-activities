# Maintainer: Jakub Valenta <jakub@jakubvalenta.cz>
pkgname=human-activities
pkgver=0.9.0
pkgrel=1
epoch=
pkgdesc='Monitor size of directories'
arch=('any')
url='https://lab.saloun.cz/jakub/human-activities'
license=('GPL')
groups=()
depends=('python-pillow' 'python-sqlalchemy' 'python-wxpython>=4')
makedepends=()
checkdepends=('python-pytest')
optdepends=('libappindicator-gtk3: AppIndicator support')
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=($pkgname-$pkgver.tar.xz)
md5sums=('be6d2e90015e17d771fa4e9543a727a9')
noextract=()

build() {
  cd "$srcdir/$pkgname-$pkgver"

  make build
}

check() {
  cd "$srcdir/$pkgname-$pkgver"

  make -k check
}

package() {
  cd "$srcdir/$pkgname-$pkgver"

  DESTDIR="$pkgdir" make install

  install -D -m644 -t "$pkgdir/etc/xdg/autostart/" data/*.desktop
  install -D -m644 -t "$pkgdir/usr/lib/systemd/system/" data/*.service data/*.timer
  install -d -m755 "$pkgdir/usr/lib/systemd/system/timers.target.wants"
  ln -s ../human-activities.timer "$pkgdir/usr/lib/systemd/system/timers.target.wants/human-activities.timer"
}

# vim:set ts=2 sw=2 et:
md5sums=('df061aa25fe10415592a6e4e7a90311e')
